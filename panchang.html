<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hindu Panchang Calendar for Varanasi - Check today's tithi, nakshatra, auspicious timings, festivals, and muhurat.">
    <title>Hindu Panchang Calendar - Daily Tithi & Muhurat | MyBanaras</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üïâÔ∏è</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .panchang-hero {
            position: relative;
            overflow: hidden;
        }
        .panchang-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('assets/panchange.png') center/cover;
            filter: blur(8px);
            transform: scale(1.1);
            z-index: -1;
        }
    </style>
</head>
<body>
    <header class="header" id="header">
        <nav class="navbar">
            <div class="container nav-container">
                <a href="index.html" class="logo"><img src="assets/mybanaras_logo.png" alt="MyBanaras Logo" class="logo-img"><span class="logo-text">MyBanaras</span></a>
                <button class="mobile-menu-toggle" id="mobileMenuToggle"><i class="fas fa-bars"></i></button>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li class="dropdown"><a href="#" class="nav-link">Explore <i class="fas fa-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="about.html">About Banaras</a></li>
                            <li><a href="ghats.html">Sacred Ghats</a></li>
                            <li><a href="temples.html">Temples</a></li>
                            <li><a href="culture.html">Culture</a></li>
                        </ul>
                    </li>
                    <li><a href="festivals.html" class="nav-link">Festivals</a></li>
                    <li><a href="panchang.html" class="nav-link active">Panchang</a></li>
                    <li><a href="travel-guide.html" class="nav-link">Travel Guide</a></li>
                    <li><a href="blog.html" class="nav-link">Blog</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <section class="hero panchang-hero" style="height: 50vh; background: linear-gradient(135deg, rgba(212, 175, 55, 0.85) 0%, rgba(255, 153, 51, 0.85) 100%);">
        <div class="hero-overlay"></div>
        <div class="hero-content"><div class="hero-text animate-fade-in">
                <h1 class="hero-title">Hindu Panchang</h1>
                <p class="hero-subtitle">Daily Calendar & Auspicious Timings</p>
            </div></div>
    </section>

    <main style="padding: 80px 0;">
        <div class="container">
            <section style="max-width: 900px; margin: 0 auto;">
                <div class="section-header animate-on-scroll">
                    <span class="section-subtitle">Today's Panchang</span>
                    <h2 class="section-title" id="currentDate">Loading...</h2>
                    <div class="title-divider"></div>
                </div>

                <div style="background: linear-gradient(135deg, var(--cream) 0%, var(--white) 100%); padding: 40px; border-radius: 20px; box-shadow: var(--shadow-lg); margin-top: 40px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px;">
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-calendar-week" style="font-size: 2.5rem; color: var(--deep-gold); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Day</h4>
                            <p id="panchangDay" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-calendar-day" style="font-size: 2.5rem; color: var(--saffron); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Tithi</h4>
                            <p id="panchangTithi" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-star" style="font-size: 2.5rem; color: var(--ganges-blue); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Nakshatra</h4>
                            <p id="panchangNakshatra" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-moon" style="font-size: 2.5rem; color: var(--saffron); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Karana</h4>
                            <p id="panchangKarna" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-sun" style="font-size: 2.5rem; color: var(--deep-gold); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Yoga</h4>
                            <p id="panchangYoga" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-bahai" style="font-size: 2.5rem; color: var(--ganges-blue); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Raasi</h4>
                            <p id="panchangRaasi" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                        <div class="animate-on-scroll" style="text-align: center; padding: 20px; background: white; border-radius: 10px;">
                            <i class="fas fa-compass" style="font-size: 2.5rem; color: var(--deep-gold); margin-bottom: 10px;"></i>
                            <h4 style="color: var(--dark-brown); margin-bottom: 5px;">Ayanamsa</h4>
                            <p id="panchangAyanamsa" style="color: var(--terracotta); font-weight: 600;">Loading...</p>
                        </div>
                    </div>
                </div>

                <section style="margin-top: 60px;">
                    <h3 style="font-family: var(--font-heading); font-size: 2rem; color: var(--dark-brown); margin-bottom: 30px; text-align: center;">Auspicious Timings</h3>
                    <div style="display: grid; gap: 20px;">
                        <div class="testimonial-card animate-on-scroll">
                            <h4 style="color: var(--saffron); font-size: 1.2rem; margin-bottom: 10px;"><i class="fas fa-sun-rise"></i> Sunrise & Sunset</h4>
                            <p><strong>Sunrise:</strong> <span id="sunriseTime">Loading...</span> | <strong>Sunset:</strong> <span id="sunsetTime">Loading...</span></p>
                        </div>
                        <!-- <div class="testimonial-card animate-on-scroll">
                            <h4 style="color: var(--deep-gold); font-size: 1.2rem; margin-bottom: 10px;"><i class="fas fa-clock"></i> Abhijit Muhurat (Auspicious)</h4>
                            <p><strong>Time:</strong> 11:45 AM - 12:33 PM</p>
                            <p style="font-size: 0.9rem; color: var(--gray-medium); margin-top: 5px;">Best time for important work and new beginnings</p>
                        </div>
                        <div class="testimonial-card animate-on-scroll">
                            <h4 style="color: var(--terracotta); font-size: 1.2rem; margin-bottom: 10px;"><i class="fas fa-times-circle"></i> Rahu Kaal (Inauspicious)</h4>
                            <p><strong>Time:</strong> 04:30 PM - 06:00 PM</p>
                            <p style="font-size: 0.9rem; color: var(--gray-medium); margin-top: 5px;">Avoid starting new ventures during this period</p>
                        </div> -->
                        <div class="testimonial-card animate-on-scroll">
                            <h4 style="color: var(--ganges-blue); font-size: 1.2rem; margin-bottom: 10px;"><i class="fas fa-praying-hands"></i> Ganga Aarti Timings</h4>
                            <p><strong>Morning:</strong> Around 5:00 AM in summer and 5:30 AM in winter (Assi Ghat) | <strong>Evening:</strong> Around 7:00 PM in summer and 6:00 PM in winter (Dashashwamedh Ghat)</p>
                        </div>
                    </div>
                </section>

                <section style="margin-top: 60px;">
                    <h3 style="font-family: var(--font-heading); font-size: 2rem; color: var(--dark-brown); margin-bottom: 30px; text-align: center;">Upcoming Festivals</h3>
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: var(--shadow-md);">
                        <ul id="upcomingFestivalsList" style="list-style: none; padding: 0;">
                            <li class="festival-loading" style="padding: 15px; display: flex; justify-content: center; color: var(--gray-medium);">
                                <span><i class="fas fa-spinner fa-spin" style="margin-right: 10px; color: var(--saffron);"></i>Loading upcoming festivals...</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <div class="spiritual-quote animate-on-scroll" style="margin-top: 60px;">
                    <i class="fas fa-info-circle"></i>
                    <p><strong>Note:</strong> Panchang timings are calculated for Varanasi (25.3176¬∞ N, 82.9739¬∞ E). For accurate personalized panchang, consult local pandits or astrologers. All times mentioned are in Indian Standard Time (IST).</p>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn btn-primary print-button"><i class="fas fa-print"></i> Print Panchang</button>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom"><p>&copy; 2024 MyBanaras.com. All rights reserved.</p></div>
        </div>
    </footer>

    <a href="https://wa.me/9118330806" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>
    <button class="scroll-to-top" id="scrollToTop"><i class="fas fa-arrow-up"></i></button>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/schenna/panchangJS@master/src/panchang.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const listEl = document.getElementById('upcomingFestivalsList');
            const summaryEls = {
                day: document.getElementById('panchangDay'),
                tithi: document.getElementById('panchangTithi'),
                nakshatra: document.getElementById('panchangNakshatra'),
                karna: document.getElementById('panchangKarna'),
                yoga: document.getElementById('panchangYoga'),
                raasi: document.getElementById('panchangRaasi'),
                ayanamsa: document.getElementById('panchangAyanamsa')
            };

function getSunriseSunset(date, lat, lng) {
                const rad = Math.PI / 180;
                const day = date.getDate();
                const month = date.getMonth() + 1;
                const year = date.getFullYear();
                const n = Math.floor(275 * month / 9) - Math.floor((month + 9) / 12) * (1 + Math.floor((year - 4 * Math.floor(year / 4) + 2) / 3)) + day - 30;
                const longitude = lng / 360;
                const latitude = lat * rad;
                const declination = 23.45 * rad * Math.sin(rad * (284 + n) * 360 / 365.25);
                const hourAngle = Math.acos((Math.sin(-0.83 * rad) - Math.sin(latitude) * Math.sin(declination)) / (Math.cos(latitude) * Math.cos(declination)));
                const sunrise = 12 - hourAngle / rad * 4 / 60 - longitude;
                const sunset = 12 + hourAngle / rad * 4 / 60 - longitude;
                const sunriseTime = new Date(date);
                sunriseTime.setHours(Math.floor(sunrise), Math.floor((sunrise % 1) * 60));
                const sunsetTime = new Date(date);
                sunsetTime.setHours(Math.floor(sunset), Math.floor((sunset % 1) * 60));
                return { sunrise: sunriseTime, sunset: sunsetTime };
            }

            const setSummaryValues = values => {
                if (!values) {
                    return;
                }
                const fallback = 'Unavailable';
                if (summaryEls.day) summaryEls.day.textContent = values.day ?? fallback;
                if (summaryEls.tithi) summaryEls.tithi.textContent = values.tithi ?? fallback;
                if (summaryEls.nakshatra) summaryEls.nakshatra.textContent = values.nakshatra ?? fallback;
                if (summaryEls.karna) summaryEls.karna.textContent = values.karna ?? fallback;
                if (summaryEls.yoga) summaryEls.yoga.textContent = values.yoga ?? fallback;
                if (summaryEls.raasi) summaryEls.raasi.textContent = values.raasi ?? fallback;
                if (summaryEls.ayanamsa) summaryEls.ayanamsa.textContent = values.ayanamsa ?? fallback;
            };

            const setSummaryUnavailable = () => setSummaryValues({});

            if (typeof panchang === 'undefined') {
                setSummaryUnavailable();
                return;
            }

            const IST_OFFSET_MINUTES = -330;
            const MAX_LOOKAHEAD_DAYS = 160;
            const MAX_EVENTS = 6;

            const festivalTemplates = [
                {
                    id: 'ekadashi',
                    tithiName: 'Ekadasi',
                    phases: ['Shukla Paksha', 'Krishna Paksha'],
                    iconClass: 'fas fa-praying-hands',
                    label: info => `${info.phase} Ekadashi`,
                    description: 'Sacred fasting day dedicated to Lord Vishnu.'
                },
                {
                    id: 'purnima',
                    tithiName: 'Punnami',
                    phases: ['Shukla Paksha'],
                    iconClass: 'fas fa-moon',
                    label: () => 'Purnima (Full Moon)',
                    description: 'Full moon night ideal for Satyanarayan puja and meditation.'
                },
                {
                    id: 'amavasya',
                    tithiName: 'Amavasya',
                    phases: ['Krishna Paksha'],
                    iconClass: 'fas fa-circle-notch',
                    label: () => 'Amavasya (New Moon)',
                    description: 'Day dedicated to ancestors with tarpan and prayers.'
                },
                {
                    id: 'pradosh',
                    tithiName: 'Trayodasi',
                    phases: ['Shukla Paksha', 'Krishna Paksha'],
                    iconClass: 'fas fa-trident',
                    label: info => `${info.phase} Trayodashi (Pradosh Vrat)`,
                    description: 'Evening Shiva worship believed to remove hardships.'
                },
                {
                    id: 'chaturthi',
                    tithiName: 'Chavithi',
                    phases: ['Shukla Paksha', 'Krishna Paksha'],
                    iconClass: 'fas fa-om',
                    label: info => info.phase === 'Shukla Paksha' ? 'Vinayaka Chaturthi' : 'Sankashti Chaturthi',
                    description: info => info.phase === 'Shukla Paksha'
                        ? 'Celebrates Lord Ganesha\'s birth with elaborate puja.'
                        : 'Fasting day seeking Lord Ganesha\'s blessings to remove obstacles.'
                }
            ];

            const formatDate = date => date.toLocaleDateString('en-IN', {
                weekday: 'short',
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });

            const now = new Date();
            const localOffset = now.getTimezoneOffset();
            const nowIst = new Date(now.getTime() + (localOffset - IST_OFFSET_MINUTES) * 60000);
            const baseDate = new Date(nowIst.getFullYear(), nowIst.getMonth(), nowIst.getDate(), 12, 0, 0, 0);

            const events = [];
            const originalOffsetFn = Date.prototype.getTimezoneOffset;
            Date.prototype.getTimezoneOffset = function () {
                return IST_OFFSET_MINUTES;
            };

            let summaryUpdated = false;

            try {
                const summaryDate = new Date(baseDate);
                panchang.calculate(summaryDate, () => {
                    setSummaryValues({
                        day: panchang?.Day?.name,
                        tithi: panchang?.Tithi?.name,
                        nakshatra: panchang?.Nakshatra?.name,
                        karna: panchang?.Karna?.name,
                        yoga: panchang?.Yoga?.name,
                        raasi: panchang?.Raasi?.name,
                        ayanamsa: panchang?.Ayanamsa?.name
                    });
                    summaryUpdated = true;

                    const sunTimes = getSunriseSunset(summaryDate, 25.3176, 82.9739);
                    const sunriseEl = document.getElementById('sunriseTime');
                    const sunsetEl = document.getElementById('sunsetTime');
                    if (sunriseEl) sunriseEl.textContent = sunTimes.sunrise.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });
                    if (sunsetEl) sunsetEl.textContent = sunTimes.sunset.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });
                });

                for (let dayOffset = 0; dayOffset < MAX_LOOKAHEAD_DAYS && events.length < MAX_EVENTS; dayOffset++) {
                    const iterDate = new Date(baseDate);
                    iterDate.setDate(baseDate.getDate() + dayOffset);

                    panchang.calculate(iterDate);

                    const tithiName = panchang?.Tithi?.name;
                    if (!tithiName || typeof tith === 'undefined') {
                        continue;
                    }

                    const tithiIndex = tith.indexOf(tithiName);
                    if (tithiIndex === -1) {
                        continue;
                    }

                    const phase = tithiIndex <= 14 ? 'Shukla Paksha' : 'Krishna Paksha';
                    const tithiNumber = (tithiIndex % 15) + 1;
                    const dateKey = `${iterDate.getFullYear()}-${String(iterDate.getMonth() + 1).padStart(2, '0')}-${String(iterDate.getDate()).padStart(2, '0')}`;

                    festivalTemplates.forEach(template => {
                        if (events.length >= MAX_EVENTS) {
                            return;
                        }
                        if (template.tithiName !== tithiName) {
                            return;
                        }
                        if (template.phases && !template.phases.includes(phase)) {
                            return;
                        }

                        const alreadyAdded = events.some(evt => evt.dateKey === dateKey && evt.templateId === template.id);
                        if (alreadyAdded) {
                            return;
                        }

                        const title = typeof template.label === 'function' ? template.label({ phase }) : template.label;
                        const description = typeof template.description === 'function'
                            ? template.description({ phase })
                            : template.description;

                        events.push({
                            templateId: template.id,
                            iconClass: template.iconClass,
                            title,
                            description,
                            date: new Date(iterDate.getTime()),
                            dateKey,
                            phase,
                            tithiName,
                            tithiNumber
                        });
                    });
                }
            } catch (error) {
                setSummaryUnavailable();
                console.error('Panchang festival calculation failed', error);
            } finally {
                Date.prototype.getTimezoneOffset = originalOffsetFn;
            }

            if (!summaryUpdated) {
                setSummaryUnavailable();
            }

            if (!listEl) {
                return;
            }

            listEl.innerHTML = '';

            if (!events.length) {
                const emptyItem = document.createElement('li');
                emptyItem.style.padding = '15px';
                emptyItem.style.color = 'var(--gray-medium)';
                emptyItem.textContent = 'Festival data is unavailable right now. Please check back soon.';
                listEl.appendChild(emptyItem);
                return;
            }

            events
                .sort((a, b) => a.date - b.date)
                .slice(0, MAX_EVENTS)
                .forEach(evt => {
                    const item = document.createElement('li');
                    item.style.padding = '15px';
                    item.style.borderBottom = '1px solid var(--cream)';
                    item.style.display = 'flex';
                    item.style.flexDirection = 'column';
                    item.style.gap = '6px';

                    const header = document.createElement('div');
                    header.style.display = 'flex';
                    header.style.justifyContent = 'space-between';
                    header.style.alignItems = 'center';

                    const titleWrap = document.createElement('span');
                    titleWrap.style.display = 'flex';
                    titleWrap.style.alignItems = 'center';
                    titleWrap.style.gap = '10px';

                    const iconEl = document.createElement('i');
                    iconEl.className = evt.iconClass;
                    iconEl.style.color = 'var(--saffron)';
                    iconEl.style.fontSize = '1.1rem';

                    const titleEl = document.createElement('strong');
                    titleEl.style.color = 'var(--dark-brown)';
                    titleEl.textContent = evt.title;

                    titleWrap.appendChild(iconEl);
                    titleWrap.appendChild(titleEl);

                    const dateEl = document.createElement('span');
                    dateEl.style.color = 'var(--gray-medium)';
                    dateEl.textContent = formatDate(evt.date);

                    header.appendChild(titleWrap);
                    header.appendChild(dateEl);
                    item.appendChild(header);

                    const detailEl = document.createElement('span');
                    detailEl.style.color = 'var(--gray-medium)';
                    detailEl.style.fontSize = '0.9rem';
                    detailEl.textContent = `${evt.phase} ‚Ä¢ Tithi ${evt.tithiNumber} (${evt.tithiName})`;
                    item.appendChild(detailEl);

                    if (evt.description) {
                        const descEl = document.createElement('span');
                        descEl.style.color = 'var(--terracotta)';
                        descEl.style.fontSize = '0.9rem';
                        descEl.textContent = evt.description;
                        item.appendChild(descEl);
                    }

                    listEl.appendChild(item);
                });
        });
    </script>
    <script>
        const dateEl = document.getElementById('currentDate');
        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateEl.textContent = today.toLocaleDateString('en-US', options);
    </script>
</body>
</html>
